# QC Pipeline - ระบบตรวจคุณภาพก่อนลงแพลตฟอร์ม

## ภาพรวม

ระบบ QC Pipeline รวม 6 ขั้นตอน ใช้ skills ที่มีอยู่แล้วในโปรเจค ออกเป็นรายงาน 1 ฉบับ เพื่อปรับปรุงก่อนลงแพลตฟอร์ม

**เมื่อไหร่ต้องรัน QC:** หลังแต่งครบ 15-20 ตอน ก่อนลงแพลตฟอร์ม

---

## 6 ขั้นตอน QC

### ขั้นที่ 1: ตรวจความถูกต้อง (Fact Check)

**Skill:** `claude-code-novels/skills/fact-checker/SKILL.md`

**ตรวจอะไร:**
- ข้อมูลการแพทย์/โรค/อาการ ถูกต้องไหม
- ข้อมูลกฎหมาย/ตำรวจ/ศาล ถูกต้องไหม
- ข้อมูลอาชีพ (CEO/หมอ/ทหาร/มาเฟีย) สมจริงไหม
- สถานที่/ภูมิศาสตร์ ถูกต้องไหม
- เทคโนโลยี/อาวุธ/ยานพาหนะ สมเหตุสมผลไหม

**ระดับปัญหา:**
- Critical: ผิดชัดเจน ผู้อ่านจับได้ทันที
- Major: ผิดถ้าผู้อ่านรู้เรื่องนั้นดี
- Minor: ผิดเล็กน้อย ไม่ค่อยมีใครสังเกต
- Artistic License: จงใจแต่งต่าง ยอมรับได้ (ถ้าไม่ใช่เรื่องสุขภาพ/ความปลอดภัย)

**วิธีรัน:**
```
อ่านทุกตอนของ [ชื่อเรื่อง] แล้วตรวจความถูกต้องตาม fact-checker skill
โดยเฉพาะข้อมูลเกี่ยวกับ [อาชีพ/สถานที่/การแพทย์] ที่ปรากฏในเรื่อง
รายงานเป็นตาราง: ตอนที่, จุดที่ผิด, ระดับ, ข้อเท็จจริง, แนะนำแก้ไข
```

---

### ขั้นที่ 2: ตรวจความสอดคล้อง (Consistency Check)

**Skill:** `claude-code-novels/skills/consistency-checker/SKILL.md`

**ตรวจ 4 ด้าน:**

1. **ตัวละคร:** พฤติกรรมตรงกับบุคลิกไหม, สำเนียงพูดสม่ำเสมอไหม, ทักษะ/ความสามารถขัดกันไหม
2. **Timeline:** ลำดับเหตุการณ์ถูกไหม, ระยะเวลาสมเหตุสมผลไหม, อายุตัวละครตรงไหม
3. **โลก/ฉากหลัง:** กฎของโลกสม่ำเสมอไหม, ภูมิศาสตร์/สถานที่ขัดกันไหม, วัฒนธรรม/เทคโนโลยีตรงยุคไหม
4. **โครงเรื่อง:** เหตุและผลสมเหตุสมผลไหม, มี setup ที่ไม่มี payoff ไหม, ตัวละครรู้สิ่งที่ไม่ควรรู้ไหม

**วิธีรัน:**
```
อ่านไฟล์ตัวละคร (03-ตัวละคร.txt) และ plot (02-plot.txt) ของ [ชื่อเรื่อง]
แล้วตรวจทุกตอนตาม consistency-checker skill
รายงาน: ประเภท, ตอนที่, จุดที่ขัดกัน, ระดับ (Critical/Major/Minor), แนะนำแก้
```

---

### ขั้นที่ 3: ตรวจจังหวะ (Pacing Analysis)

**Skill:** `claude-code-novels/skills/pacing-analyzer/SKILL.md`

**ตรวจอะไร:**
- ตอนไหนช้าเกินไป (filler, บรรยายยืดยาว, ไม่มี conflict)
- ตอนไหนเร็วเกินไป (เหตุการณ์สำคัญผ่านเร็ว, ไม่มีเวลาอารมณ์)
- Story arc ครบ 3 องก์ไหม (Setup 25% → Confrontation 50% → Resolution 25%)
- มี "sagging middle" ไหม (ช่วงกลางเรื่องน่าเบื่อ)
- Transition ระหว่างฉากลื่นไหลไหม

**เกณฑ์ Filler:**
ตอนที่ถือว่าเป็น filler = ถ้าตัดออกแล้วเรื่องยังดำเนินได้, ไม่มี conflict/character development, ไม่ขยับ plot

**วิธีรัน:**
```
วิเคราะห์จังหวะทุกตอนของ [ชื่อเรื่อง] ตาม pacing-analyzer skill
รายงาน: แผนที่จังหวะทั้งเรื่อง, ตอนที่ช้า/เร็วเกินไป, ตอนที่เป็น filler, แนะนำปรับ
```

---

### ขั้นที่ 4: ตรวจ Hook & Cliffhanger

**Skill:** `claude-code-novels/skills/hook-cliffhanger-specialist/SKILL.md`

**ตรวจอะไร:**
- **ทุกตอน:** มี cliffhanger ท้ายตอนไหม + แรงพอไหม (1-5 ดาว)
- **ตอนที่ 1:** มี hook เปิดเรื่องที่ดึงดูดไหม
- **ตอนที่ 10 (Paywall Hook):** cliffhanger แรงที่สุดของเรื่องไหม
  - ต้องมี: [Revelation] + [Danger/Decision] + [Emotional Peak] + [Unanswered Question]
  - ความแรง: ต้อง 5/5 ดาว

**เกณฑ์ Cliffhanger:**
- 1 ดาว: อ่อน ไม่มีแรงจูงใจอ่านต่อ → **ต้องแก้**
- 2 ดาว: พอได้ แต่ไม่น่าตื่นเต้น → **ควรแก้**
- 3 ดาว: ดี มีความอยากรู้ → **ผ่าน**
- 4 ดาว: แรง อยากอ่านต่อมาก → **ดี**
- 5 ดาว: แรงมาก ต้องอ่านต่อทันที → **ยอดเยี่ยม**

**วิธีรัน:**
```
ตรวจ hook เปิดเรื่อง และ cliffhanger ท้ายทุกตอนของ [ชื่อเรื่อง]
ตาม hook-cliffhanger-specialist skill
ให้คะแนนแต่ละตอน 1-5 ดาว โดยเฉพาะตอนที่ 10 ต้องเป็น 5 ดาว
รายงาน: ตอนที่, ประเภท cliffhanger, คะแนน, แนะนำปรับ (ถ้าต่ำกว่า 3)
```

---

### ขั้นที่ 5: ขัดภาษาไทย (Thai Language Polish)

**Skill:** `claude-code-novels/skills/thai-language-polish/SKILL.md`

**ตรวจอะไร:**
- คำซ้ำซ้อน (ตัด "ที่จะ", "ซึ่ง", "เป็นอย่างมาก", "มีความ" ที่ไม่จำเป็น)
- ประโยคยาวเกินไป (ตัดเป็นประโยคสั้นกระชับ)
- ภาษาแข็ง/เป็นทางการเกินไป (ปรับให้เป็นธรรมชาติ)
- คำเชื่อมมากเกินไป
- จังหวะประโยค (ผสมประโยคสั้น-ยาว สร้าง rhythm)
- แสดงอารมณ์ผ่าน action ไม่ใช่ telling (หัวใจเต้นตุ้บๆ แทน "เธอตื่นเต้นมาก")

**วิธีรัน:**
```
ขัดภาษาไทยทุกตอนของ [ชื่อเรื่อง] ตาม thai-language-polish skill
รายงาน: ตอนที่, จำนวนจุดที่แก้, ประเภทปัญหาหลัก, ตัวอย่างก่อน-หลัง
```

---

### ขั้นที่ 6: ตรวจ NC (เฉพาะเรื่องที่มีฉาก NC)

**Skill:** `novels-nc/nc-automation/skills/nc-qc-validator/SKILL.md`

**ตรวจ 4 ด้าน (น้ำหนักคะแนน):**

1. **Consent (30%):** มี consent ชัดเจน, ไม่มี red flag (บังคับ/มึนเมา/ข่มขู่)
2. **ตัวละคร (25%):** ตัวละครแสดงออก in-character, บทสนทนาตรงบุคลิก
3. **Intensity (20%):** ระดับเข้มข้นตรงกับ platform ที่จะลง
   - Tunwalai: ระดับ 7-8
   - Fictionlog: ระดับ 9-10
4. **คุณภาพเทคนิค (25%):** ภาษา/ไวยากรณ์ถูกต้อง, จังหวะดี, โครงสร้างครบ (buildup → peak → aftermath)

**เกณฑ์ผ่าน NC:**
- คะแนนรวม >= 75%
- Consent score >= 8/10
- ไม่มี red flag

**วิธีรัน:**
```
ตรวจทุกฉาก NC ของ [ชื่อเรื่อง] ตาม nc-qc-validator skill
รายงาน: ตอนที่, ฉากที่, คะแนน consent, คะแนนรวม, ผ่าน/ไม่ผ่าน, จุดต้องแก้
```

---

## เกณฑ์ผ่าน QC รวม

| เกณฑ์ | ค่าที่ต้องได้ |
|-------|-------------|
| คะแนนรวมทุกขั้นตอน | >= 85/100 |
| Critical issues | 0 (ห้ามมี) |
| Major issues | <= 5 จุด (ต้องแก้ทั้งหมด) |
| ตอนที่ 1 - Hook | >= 4/5 ดาว |
| ตอนที่ 10 - Paywall Hook | = 5/5 ดาว (ต้องแรงสุด) |
| Cliffhanger เฉลี่ยทุกตอน | >= 3/5 ดาว |
| NC consent score | >= 8/10 (ถ้ามี NC) |
| NC red flags | 0 (ห้ามมี) |

### ผลลัพธ์:
- **ผ่าน:** พร้อมลงแพลตฟอร์ม
- **ผ่านมีเงื่อนไข:** แก้ Major issues ก่อน แล้วลงได้
- **ไม่ผ่าน:** มี Critical issue หรือคะแนนต่ำกว่า 85 → ต้องแก้แล้ว QC ใหม่

---

## วิธีสั่งรัน QC Pipeline ทั้งหมด

```
รัน QC Pipeline สำหรับนิยาย [ชื่อเรื่อง]
ตรวจทั้ง 6 ขั้นตอน:
1. Fact Check - ตรวจความถูกต้อง
2. Consistency Check - ตรวจความสอดคล้อง
3. Pacing Analysis - ตรวจจังหวะ
4. Hook & Cliffhanger - ตรวจ hook/cliffhanger ทุกตอน
5. Thai Language Polish - ตรวจภาษาไทย
6. NC QC (ถ้ามีฉาก NC)

แล้วสรุปเป็นรายงาน QC ตาม template ใน ai-factory/templates/qc-report.md
```

---

## Tips การใช้งาน

1. **ไม่ต้องรันทีเดียว 6 ขั้นตอน** - รันทีละขั้นได้ โดยเฉพาะถ้าเรื่องยาว
2. **ขั้นที่ 1-3 รันก่อน** เพราะถ้ามีปัญหา content ต้องแก้ก่อนขัดภาษา
3. **ขั้นที่ 5 (ขัดภาษา) รันสุดท้าย** เพราะถ้าแก้ content จะต้องขัดภาษาใหม่
4. **ตอนที่ 10 ให้ความสำคัญพิเศษ** เพราะเป็น paywall hook ต้องแรงที่สุด
5. **NC ตรวจแยกได้** ไม่จำเป็นต้องรันพร้อม QC ปกติ
