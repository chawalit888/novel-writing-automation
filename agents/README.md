# Novel Empire Agent System

## Overview

à¸£à¸°à¸šà¸š AI Agents à¸ªà¸³à¸«à¸£à¸±à¸šà¸ˆà¸±à¸”à¸à¸²à¸£ Novel Writing Automation Project

```
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚      CEO Agent      â”‚
                              â”‚  Strategic Control  â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                         â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                                â”‚                                â”‚
        â–¼                                â–¼                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Claude Code Mgr   â”‚          â”‚  Cover Design Mgr   â”‚          â”‚    N8n Manager    â”‚
â”‚ Premium Quality   â”‚          â”‚    Book Covers      â”‚          â”‚    High Volume    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                                â”‚                               â”‚
   â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚           â”‚              â”‚     â”‚     â”‚     â”‚     â”‚        â”‚         â”‚         â”‚
   â–¼           â–¼              â–¼     â–¼     â–¼     â–¼     â–¼        â–¼         â–¼         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”
â”‚Writer â”‚ â”‚Qualityâ”‚      â”‚Image â”‚â”‚Promptâ”‚â”‚Layoutâ”‚â”‚Cover â”‚ â”‚Genera-â”‚ â”‚Writer â”‚ â”‚Qualityâ”‚
â”‚ Agent â”‚ â”‚ Agent â”‚      â”‚Scout â”‚â”‚Engnr â”‚â”‚Designâ”‚â”‚  QC  â”‚ â”‚ tor   â”‚ â”‚ Agent â”‚ â”‚ Agent â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Agent Summary

| Agent | Role | Model | Team |
|-------|------|-------|------|
| NovelEmpireCEO | Strategic oversight | Claude Opus | Management |
| ClaudeCodeManager | Premium team leader | Claude Sonnet | Claude Code |
| N8nManager | Volume team leader | GPT-4o-mini | N8n |
| **CoverDesignManager** | Cover team leader | Claude Sonnet | Cover Design |
| ClaudeWriter | Premium writing | Claude Sonnet | Claude Code |
| ClaudeQuality | Premium QC | Claude Sonnet | Claude Code |
| N8nGenerator | Character/Plot gen | Gemini Pro | N8n |
| N8nWriter | Volume writing | Mixed | N8n |
| N8nQuality | Volume QC | Gemini Flash | N8n |
| **ImageScout** | Find stock photos | Claude Sonnet | Cover Design |
| **PromptEngineer** | Write AI prompts | Claude Sonnet | Cover Design |
| **LayoutDesigner** | Design typography | Claude Sonnet | Cover Design |
| **CoverQC** | Quality check covers | Claude Sonnet | Cover Design |

**Total: 13 Agents (3 Managers + 10 Subagents)**

## Directory Structure

```
agents/
â”œâ”€â”€ README.md              # This file
â”œâ”€â”€ orchestrator.py        # Central message routing
â”œâ”€â”€ agent_runner.py        # Agent execution
â”‚
â”œâ”€â”€ config/                # Agent configurations
â”‚   â”œâ”€â”€ ceo.yaml
â”‚   â”œâ”€â”€ claude-manager.yaml
â”‚   â”œâ”€â”€ n8n-manager.yaml
â”‚   â”œâ”€â”€ cover-design-manager.yaml    # ğŸ†• Cover Design Team
â”‚   â””â”€â”€ subagents/
â”‚       â”œâ”€â”€ claude-writer.yaml
â”‚       â”œâ”€â”€ claude-quality.yaml
â”‚       â”œâ”€â”€ n8n-generator.yaml
â”‚       â”œâ”€â”€ n8n-writer.yaml
â”‚       â”œâ”€â”€ n8n-quality.yaml
â”‚       â”œâ”€â”€ image-scout.yaml          # ğŸ†•
â”‚       â”œâ”€â”€ prompt-engineer.yaml      # ğŸ†•
â”‚       â”œâ”€â”€ layout-designer.yaml      # ğŸ†•
â”‚       â””â”€â”€ cover-qc.yaml             # ğŸ†•
â”‚
â”œâ”€â”€ skills/                # Agent skills
â”‚   â”œâ”€â”€ strategic-planning.md
â”‚   â”œâ”€â”€ resource-allocation.md
â”‚   â”œâ”€â”€ workflow-orchestration.md
â”‚   â””â”€â”€ batch-processing.md
â”‚
â”œâ”€â”€ messages/              # Inter-agent messages
â”‚   â”œâ”€â”€ ceo-inbox/
â”‚   â”œâ”€â”€ claude-manager/
â”‚   â”œâ”€â”€ n8n-manager/
â”‚   â”œâ”€â”€ cover-manager/                # ğŸ†•
â”‚   â”œâ”€â”€ broadcasts/
â”‚   â””â”€â”€ archive/
â”‚
â””â”€â”€ logs/                  # Agent logs
    â”œâ”€â”€ ceo.log
    â”œâ”€â”€ claude-team.log
    â”œâ”€â”€ n8n-team.log
    â””â”€â”€ cover-team.log                # ğŸ†•

cover-design-team/         # ğŸ†• Cover Design Resources
â”œâ”€â”€ README.md
â”œâ”€â”€ templates/
â”‚   â”œâ”€â”€ cover-brief-template.md
â”‚   â”œâ”€â”€ color-schemes.json
â”‚   â””â”€â”€ font-guide.md
â”œâ”€â”€ resources/
â”œâ”€â”€ skills/
â””â”€â”€ examples/
```

## Quick Start

### 1. Check System Status
```bash
python agents/orchestrator.py --status
```

### 2. Run an Agent
```bash
# Run CEO
python agents/agent_runner.py ceo

# Run Claude Manager
python agents/agent_runner.py claude-manager

# Run N8n Manager
python agents/agent_runner.py n8n-manager

# Run Subagents
python agents/agent_runner.py claude-writer
python agents/agent_runner.py n8n-generator
```

### 3. Send a Task
```bash
python agents/orchestrator.py --send-task '{
  "title": "à¸ªà¸£à¹‰à¸²à¸‡à¸™à¸´à¸¢à¸²à¸¢à¹à¸Ÿà¸™à¸•à¸²à¸‹à¸µ",
  "genre": "fantasy",
  "novel_count": 1,
  "quality": "premium",
  "chapters": 25,
  "priority": "normal"
}'
```

### 4. Generate Report
```bash
python agents/orchestrator.py --report
```

## Communication Protocol

### Message Format
```json
{
  "id": "msg-abc123",
  "timestamp": "2025-01-15T10:00:00Z",
  "from": "ceo-001",
  "to": "mgr-claude-001",
  "type": "task",
  "priority": "high",
  "subject": "New Novel Project",
  "body": {
    "action": "create_novel",
    "params": {...}
  },
  "requires_response": true,
  "deadline": "2025-01-20T10:00:00Z"
}
```

### Message Types
- `task` - à¸‡à¸²à¸™à¸—à¸µà¹ˆà¸•à¹‰à¸­à¸‡à¸—à¸³
- `status` - à¸£à¸²à¸¢à¸‡à¸²à¸™à¸ªà¸–à¸²à¸™à¸°
- `question` - à¸„à¸³à¸–à¸²à¸¡/à¸‚à¸­à¸„à¸³à¸›à¸£à¸¶à¸à¸©à¸²
- `report` - à¸£à¸²à¸¢à¸‡à¸²à¸™à¸œà¸¥à¸¥à¸±à¸à¸˜à¹Œ
- `alert` - à¹à¸ˆà¹‰à¸‡à¹€à¸•à¸·à¸­à¸™
- `broadcast` - à¸›à¸£à¸°à¸à¸²à¸¨à¸–à¸¶à¸‡à¸—à¸¸à¸à¸„à¸™

### Priority Levels
- `critical` - à¸”à¹ˆà¸§à¸™à¸—à¸µà¹ˆà¸ªà¸¸à¸”
- `high` - à¸ªà¸³à¸„à¸±à¸
- `normal` - à¸›à¸à¸•à¸´
- `low` - à¸—à¸³à¹€à¸¡à¸·à¹ˆà¸­à¸§à¹ˆà¸²à¸‡

## Workflow Examples

### Example 1: Premium Novel
```
User â†’ CEO: "à¸ªà¸£à¹‰à¸²à¸‡à¸™à¸´à¸¢à¸²à¸¢à¹à¸Ÿà¸™à¸•à¸²à¸‹à¸µà¸„à¸¸à¸“à¸ à¸²à¸à¸ªà¸¹à¸‡ 25 à¸šà¸—"
       â”‚
       â–¼
CEO analyzes â†’ assigns to ClaudeCodeManager
       â”‚
       â–¼
ClaudeCodeManager â†’ ClaudeWriter: "à¸ªà¸£à¹‰à¸²à¸‡ characters"
       â”‚
       â–¼
ClaudeWriter completes â†’ reports back
       â”‚
       â–¼
ClaudeCodeManager â†’ ClaudeWriter: "à¸ªà¸£à¹‰à¸²à¸‡ plot"
       â”‚
       â–¼
ClaudeWriter completes â†’ reports back
       â”‚
       â–¼
For each chapter:
  ClaudeCodeManager â†’ ClaudeWriter: "à¹€à¸‚à¸µà¸¢à¸™à¸šà¸— X"
  ClaudeWriter completes â†’ ClaudeQuality: "à¸•à¸£à¸§à¸ˆà¸šà¸— X"
  ClaudeQuality reports â†’ ClaudeCodeManager
       â”‚
       â–¼
ClaudeCodeManager â†’ CEO: "à¹€à¸ªà¸£à¹‡à¸ˆà¹à¸¥à¹‰à¸§"
       â”‚
       â–¼
CEO â†’ User: "à¸™à¸´à¸¢à¸²à¸¢à¹€à¸ªà¸£à¹‡à¸ˆà¸ªà¸¡à¸šà¸¹à¸£à¸“à¹Œ"
```

### Example 2: Batch Novels
```
User â†’ CEO: "à¸ªà¸£à¹‰à¸²à¸‡à¸™à¸´à¸¢à¸²à¸¢ 5 à¹€à¸£à¸·à¹ˆà¸­à¸‡ à¸«à¸¥à¸²à¸¢à¹à¸™à¸§"
       â”‚
       â–¼
CEO analyzes â†’ assigns to N8nManager
       â”‚
       â–¼
N8nManager â†’ N8nGenerator: "à¸ªà¸£à¹‰à¸²à¸‡ characters à¸—à¸±à¹‰à¸‡ 5 à¹€à¸£à¸·à¹ˆà¸­à¸‡"
       â”‚
       â–¼
N8nGenerator completes (parallel)
       â”‚
       â–¼
N8nManager â†’ N8nWriter: "batch write"
       â”‚
       â–¼
N8nWriter writes (parallel, multiple models)
       â”‚
       â–¼
N8nManager â†’ N8nQuality: "QC pipeline"
       â”‚
       â–¼
N8nQuality runs 3-layer QC
       â”‚
       â–¼
N8nManager â†’ CEO: "5 à¹€à¸£à¸·à¹ˆà¸­à¸‡à¹€à¸ªà¸£à¹‡à¸ˆ"
       â”‚
       â–¼
CEO â†’ User: "à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”à¹€à¸ªà¸£à¹‡à¸ˆà¹à¸¥à¹‰à¸§"
```

## Configuration

### Agent Config Structure (YAML)
```yaml
agent:
  id: "agent-id"
  name: "AgentName"
  role: "CEO/Manager/Subagent"
  model: "claude-sonnet-4"

responsibilities:
  - task1
  - task2

skills:
  - name: "skill-name"
    path: "path/to/skill.md"

communication:
  inbox: "agents/messages/inbox/"
  reports_to: "manager-id"
```

## Monitoring

### Check Logs
```bash
# CEO logs
tail -f agents/logs/ceo.log

# Claude team logs
tail -f agents/logs/claude-team.log

# N8n team logs
tail -f agents/logs/n8n-team.log
```

### View Pending Messages
```bash
ls agents/messages/ceo-inbox/
ls agents/messages/claude-manager/
ls agents/messages/n8n-manager/
```

## Error Handling

### Escalation Path
1. Subagent fails â†’ reports to Manager
2. Manager retries (max 2 times)
3. Still fails â†’ escalates to CEO
4. CEO evaluates:
   - Try other team
   - Adjust parameters
   - Escalate to human

### Recovery
- Messages are persisted to disk
- Agents can resume from last state
- Archive keeps history

## Development

### Adding New Agent
1. Create config in `config/` or `config/subagents/`
2. Add to agent mappings in `agent_runner.py`
3. Implement custom logic if needed

### Adding New Skill
1. Create markdown file in `skills/`
2. Reference in agent config
3. Implement execution logic

## Troubleshooting

### Agent won't start
- Check config file exists
- Verify YAML syntax
- Check logs for errors

### Messages not delivered
- Verify recipient agent ID
- Check message queue directories
- Review orchestrator logs

### Task stuck
- Check agent logs
- Verify agent is running
- Check for errors in processing

## License

Part of Novel Writing Automation Project
